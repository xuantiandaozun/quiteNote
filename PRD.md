# QuickNote (随手记) - 需求文档 (Phase 1)

## 1. 项目简介
QuickNote 是一个极简的网页随手记工具，旨在为用户提供一个“打开即记”的纯净文本记录环境。第一阶段将专注于单文档的本地化存储和极简的交互体验。

## 2. 核心功能 (Phase 1)

### 2.1 极简编辑界面
*   **全屏输入框**：页面主体为一个大幅的空白文本输入框，无多余干扰。
*   **自动聚焦**：页面加载时输入框自动获取焦点，实现“即开即记”。
*   **字数统计**：实时显示当前记录的字符数量。

### 2.2 数据持久化
*   **本地数据库存储 (IndexedDB 优先)**：
    *   Phase 1 推荐使用轻量级封装库（如 **idb-keyval** 或 **Dexie.js**），保证秒开速度（相比 SQLite WASM 加载更快）。
    *   保留架构扩展性，便于后期迁移或扩展功能。
*   **智能保存策略**：
    *   **防抖 (Debounce)**：用户停止输入 500ms-1s 后触发保存，减少高频 IO 操作。
    *   **状态反馈**：界面需有极简的状态指示（如：灰色点-已同步，转圈-保存中），让用户安心。
*   **PWA 离线支持**：
    *   配置 `manifest.json` 和 Service Worker，实现离线加载，确保无网环境下依然可用，支持安装到桌面/手机主屏幕。

### 2.3 基础交互与体验
*   **一键清除 (防误触)**：点击“清除”后变为“确认清除？”，再次点击才执行，几秒无操作自动还原，避免打断心流的弹窗。
*   **复制功能**：一键复制全文，成功后显示轻量级 Toast 提示“已复制”。
*   **移动端适配优化**：
    *   确保输入框底部有足够的 Padding，防止软键盘遮挡最后一行文字。
    *   工具栏在键盘弹起时应保持可见（Sticky 或调整布局）。
*   **多标签页同步**：利用 `BroadcastChannel` API，确保在多个标签页打开应用时，内容能够实时同步，避免数据覆盖冲突。

### 2.4 视觉设计
*   **现代美学**：使用精致的排版，默认支持深色模式 (Dark Mode) 与浅色模式（建议支持跟随系统自动切换）。
*   **微交互**：按钮悬停、输入时的平滑过渡效果。

### 2.5 Markdown 处理策略 (核心原则)
*   **源码优先 (Source First)**：
    *   为了确保作为“中转站”的数据纯净性，编辑区始终保持**纯文本/源码模式**。
    *   避免“所见即所得”带来的格式污染，确保用户复制出去的内容永远是原始的 Markdown 源码。
*   **粘贴净化**：
    *   自动识别粘贴内容，移除富文本样式（Color, Font, Background），仅保留文本字符。
*   **预览模式 (Phase 1.5/2)**：
    *   不搞复杂的双栏预览，提供一个**“预览开关” (Toggle)**。点击渲染为 HTML 供阅读，关闭回到源码模式继续编辑。

## 3. 技术栈建议
*   **构建工具**：Vite (极速热更新)
*   **存储引擎**：IndexedDB (推荐使用 `idb-keyval` 追求极致轻量与速度)
*   **前端逻辑**：Vanilla JS (原生 JS) 或 Vue 3 (Composition API)
*   **样式方案**：Modern CSS (Variables, Flexbox, Grid)
*   **PWA**：Vite PWA Plugin (实现离线缓存与安装能力)

## 4. 界面设计预想
*   **状态栏**：顶部或底部极简布局，包含字数统计、极小的保存状态指示器、Theme 切换开关（可选）。
*   **主编辑区**：大面积无边框文本域，无论是桌面还是手机端都应占据最大视野。
*   **配色参考**：深灰色背景 (#1a1a1a) + 象牙白文字 (#f5f5f5)，提升沉浸感与长时间阅读舒适度。

## 5. 项目路线图
*   **Phase 1**：实现单文件本地存储、字数统计、基础 UI。
*   **Phase 2**：多笔记管理、Markdown 渲染支持、导出为文本/PDF。
*   **Phase 3**：云端同步 (Supabase/Firebase)、账号系统。
